#!/usr/bin/env node

const stdin = process.stdin;
const url = process.argv[1];
let data = "";
let output = "curl --request ";

function addMethod(method) {
  output += method;
}

function addHeader(key, value) {
  output += " --header '" + key + ": " + value + "'";
}

stdin.setEncoding("utf8");
stdin.on("data", function (chunk) {
  data += chunk;
});
stdin.on("end", function () {
  const o = JSON.parse(data);
  addMethod(o.method);
  for (let [k, v] of Object.entries(o.headers)) {
    addHeader(k, v);
  }
  output += " " + o.url.replace("?", "\\?").replace("&", "\\&");

  console.log(output);
});

stdin.on("error", console.error);
